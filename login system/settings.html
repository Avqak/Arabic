<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>الإعدادات - شعبة اللغة العربية</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="dark-mode.css">
  <script src="dark-mode.js"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');

    * {
      font-family: 'Tajawal', sans-serif;
    }

    .bg-pattern {
      background-color: #f8f9fa;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e2e8f0' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .arabic-pattern {
      background-color: rgba(255, 255, 255, 0.8);
      background-image: url("data:image/svg+xml,%3Csvg width='42' height='44' viewBox='0 0 42 44' xmlns='http://www.w3.org/2000/svg'%3E%3Cg id='Page-1' fill='none' fill-rule='evenodd'%3E%3Cg id='brick-wall' fill='%23064e3b' fill-opacity='0.1'%3E%3Cpath d='M0 0h42v44H0V0zm1 1h40v20H1V1zM0 23h20v20H0V23zm22 0h20v20H22V23z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .input-focus:focus {
      border-color: #10b981;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
    }
  </style>
</head>

<body class="bg-pattern">
  <!-- Header -->
  <header class="sticky top-0 z-50 bg-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center">
        <div class="text-emerald-800 mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
          </svg>
        </div>
        <div>
          <h1 class="text-xl font-bold text-emerald-800">شعبة اللغة العربية</h1>
          <p class="text-sm text-gray-600">ثانوية الفلاح بجدة</p>
        </div>
      </div>

      <!-- Dark Mode Toggle Button -->
      <button id="theme-toggle" class="theme-toggle" title="التبديل إلى الوضع الداكن">
        <svg class="sun-icon" style="display: none;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>

      <nav class="hidden md:block">
        <ul class="flex space-x-1 space-x-reverse">
          <li><a href="saved_resource.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">الرئيسية</a></li>
          <li><a href="saved_resource.html#teachers" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">المعلمون</a></li>
          <li><a href="saved_resource.html#students" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">الطلاب</a></li>
          <li><a href="saved_resource.html#department-work" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">أعمال الشعبة</a></li>
          <li><a href="saved_resource.html#work" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">أعمال الطلاب</a></li>
          <li><a href="news.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">الأخبار</a></li>
          <li><a href="gallery.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">معرض الصور</a></li>
          <li><a href="contact.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">التواصل</a></li>
        </ul>
      </nav>

      <!-- Login Button -->
      <div class="login-btn mr-4">
        <a href="login.html" class="px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition">
          تسجيل الدخول
        </a>
      </div>
    </div>
  </header>

  <!-- Settings Section -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-emerald-800 mb-4">الإعدادات</h2>
        <p class="text-gray-600">إدارة إعدادات حسابك وتفضيلاتك</p>
      </div>
      
      <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-lg shadow-md arabic-pattern p-8">
          <div class="space-y-8">
            <!-- Account Settings -->
            <div>
              <h3 class="text-xl font-bold text-emerald-800 mb-4">إعدادات الحساب</h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h4 class="font-medium text-gray-800">تفعيل الإشعارات</h4>
                    <p class="text-sm text-gray-600">استلام إشعارات عن الأنشطة الجديدة</p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="notifications" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"></div>
                  </label>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h4 class="font-medium text-gray-800">البريد الإلكتروني الأسبوعي</h4>
                    <p class="text-sm text-gray-600">استلام تقرير أسبوعي عن الأنشطة</p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="weeklyEmail" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"></div>
                  </label>
                </div>
              </div>
            </div>

            <!-- Privacy Settings -->
            <div>
              <h3 class="text-xl font-bold text-emerald-800 mb-4">إعدادات الخصوصية</h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h4 class="font-medium text-gray-800">الملف الشخصي العام</h4>
                    <p class="text-sm text-gray-600">السماح للآخرين برؤية ملفك الشخصي</p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="publicProfile" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"></div>
                  </label>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h4 class="font-medium text-gray-800">مشاركة النشاط</h4>
                    <p class="text-sm text-gray-600">مشاركة نشاطك مع المستخدمين الآخرين</p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="shareActivity" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"></div>
                  </label>
                </div>
              </div>
            </div>

            <!-- Language Settings -->
            <div>
              <h3 class="text-xl font-bold text-emerald-800 mb-4">إعدادات اللغة</h3>
              <div class="space-y-4">
                <div class="p-4 bg-gray-50 rounded-lg">
                  <label for="language" class="block text-sm font-medium text-gray-700 mb-2">لغة الواجهة</label>
                  <select id="language" class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
                    <option value="ar">العربية</option>
                    <option value="en">English</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Data Management -->
            <div>
              <h3 class="text-xl font-bold text-emerald-800 mb-4">إدارة البيانات</h3>
              <div class="space-y-4">
                <div class="p-4 bg-gray-50 rounded-lg">
                  <h4 class="font-medium text-gray-800 mb-2">تصدير البيانات</h4>
                  <p class="text-sm text-gray-600 mb-4">تحميل نسخة من بياناتك الشخصية</p>
                  <button class="bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition">
                    تصدير البيانات
                  </button>
                </div>
                
                <div class="p-4 bg-red-50 rounded-lg border border-red-200">
                  <h4 class="font-medium text-red-800 mb-2">حذف الحساب</h4>
                  <p class="text-sm text-red-600 mb-4">هذا الإجراء لا يمكن التراجع عنه</p>
                  <button class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition">
                    حذف الحساب
                  </button>
                </div>
              </div>
            </div>

            <!-- Save Button -->
            <div class="flex justify-end pt-6 border-t border-gray-200">
              <button id="saveSettings" class="bg-emerald-600 text-white px-6 py-3 rounded-md hover:bg-emerald-700 transition font-medium">
                حفظ الإعدادات
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script src="auth.js"></script>
  <script>
    // Check if user is logged in
    document.addEventListener('DOMContentLoaded', function() {
      if (!auth.isLoggedIn()) {
        window.location.href = 'login.html';
        return;
      }

      loadSettings();
    });

    // Load user settings
    function loadSettings() {
      const settings = JSON.parse(localStorage.getItem('userSettings')) || {
        notifications: true,
        weeklyEmail: false,
        publicProfile: true,
        shareActivity: false,
        language: 'ar'
      };

      document.getElementById('notifications').checked = settings.notifications;
      document.getElementById('weeklyEmail').checked = settings.weeklyEmail;
      document.getElementById('publicProfile').checked = settings.publicProfile;
      document.getElementById('shareActivity').checked = settings.shareActivity;
      document.getElementById('language').value = settings.language;
    }

    // Save settings
    document.getElementById('saveSettings').addEventListener('click', function() {
      const settings = {
        notifications: document.getElementById('notifications').checked,
        weeklyEmail: document.getElementById('weeklyEmail').checked,
        publicProfile: document.getElementById('publicProfile').checked,
        shareActivity: document.getElementById('shareActivity').checked,
        language: document.getElementById('language').value
      };

      localStorage.setItem('userSettings', JSON.stringify(settings));
      auth.showNotification('تم حفظ الإعدادات بنجاح', 'success');
    });

    // Export data
    document.querySelector('button').addEventListener('click', function() {
      const user = auth.getCurrentUser();
      if (user) {
        const dataStr = JSON.stringify(user, null, 2);
        const dataBlob = new Blob([dataStr], {type: 'application/json'});
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'user-data.json';
        link.click();
        URL.revokeObjectURL(url);
        auth.showNotification('تم تصدير البيانات بنجاح', 'success');
      }
    });

    // Delete account
    document.querySelectorAll('button')[1].addEventListener('click', function() {
      if (confirm('هل أنت متأكد من حذف حسابك؟ هذا الإجراء لا يمكن التراجع عنه.')) {
        auth.logout();
        auth.showNotification('تم حذف الحساب بنجاح', 'success');
      }
    });
  </script>
</body>
</html> 