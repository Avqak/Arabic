<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>تسجيل الدخول - شعبة اللغة العربية</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../themes/dark-mode.css">
  <script src="../themes/dark-mode.js"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');

    * {
      font-family: 'Tajawal', sans-serif;
    }

    .bg-pattern {
      background-color: #f8f9fa;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e2e8f0' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .arabic-pattern {
      background-color: rgba(255, 255, 255, 0.8);
      background-image: url("data:image/svg+xml,%3Csvg width='42' height='44' viewBox='0 0 42 44' xmlns='http://www.w3.org/2000/svg'%3E%3Cg id='Page-1' fill='none' fill-rule='evenodd'%3E%3Cg id='brick-wall' fill='%23064e3b' fill-opacity='0.1'%3E%3Cpath d='M0 0h42v44H0V0zm1 1h40v20H1V1zM0 23h20v20H0V23zm22 0h20v20H22V23z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .form-container {
      max-width: 400px;
      margin: 0 auto;
    }

    .input-focus:focus {
      border-color: #10b981;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
    }

    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body class="bg-pattern">
  <!-- Header -->
  <header class="sticky top-0 z-50 bg-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center">
        <div class="text-emerald-800 mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
          </svg>
        </div>
        <div>
          <h1 class="text-xl font-bold text-emerald-800">شعبة اللغة العربية</h1>
          <p class="text-sm text-gray-600">ثانوية الفلاح بجدة</p>
        </div>
      </div>

      <!-- Dark Mode Toggle Button -->
      <button id="theme-toggle" class="theme-toggle" title="التبديل إلى الوضع الداكن">
        <svg class="sun-icon" style="display: none;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>

      <nav class="hidden md:block">
        <ul class="flex space-x-1 space-x-reverse">
          <li><a href="../index.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">الرئيسية</a></li>
          <li><a href="../index.html#teachers" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">المعلمون</a></li>
          <li><a href="../index.html#students" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">الطلاب</a></li>
          <li><a href="../index.html#department-work" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">أعمال الشعبة</a></li>
          <li><a href="../index.html#work" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">أعمال الطلاب</a></li>
          <li><a href="news.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">الأخبار</a></li>
          <li><a href="gallery.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">معرض الصور</a></li>
          <li><a href="contact.html" class="px-3 py-2 rounded-md text-sm font-medium text-emerald-800 hover:bg-emerald-100 transition">التواصل</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Login/Register Section -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-emerald-800 mb-4">تسجيل الدخول</h2>
        <p class="text-gray-600">سجل دخولك أو أنشئ حساباً جديداً</p>
      </div>
      
      <div class="form-container">
        <!-- Tab Navigation -->
        <div class="flex mb-8 bg-gray-100 rounded-lg p-1">
          <button id="login-tab" class="tab-btn flex-1 py-3 px-4 rounded-md font-medium transition active" onclick="switchTab('login')">
            تسجيل الدخول
          </button>
          <button id="register-tab" class="tab-btn flex-1 py-3 px-4 rounded-md font-medium transition" onclick="switchTab('register')">
            إنشاء حساب
          </button>
          <button id="admin-tab" class="tab-btn flex-1 py-3 px-4 rounded-md font-medium transition" onclick="switchTab('admin')">
            طلب حساب إداري
          </button>
        </div>

        <!-- Login Form -->
        <div id="login-form" class="tab-content active">
          <div class="bg-white p-8 rounded-lg shadow-md arabic-pattern">
            <form id="loginForm" class="space-y-6">
              <div>
                <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني</label>
                <input type="email" id="loginEmail" name="email" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div>
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-2">كلمة المرور</label>
                <input type="password" id="loginPassword" name="password" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div class="flex items-center justify-between">
                <label class="flex items-center">
                  <input type="checkbox" id="rememberMe" class="ml-2 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                  <span class="text-sm text-gray-700">تذكرني</span>
                </label>
                <a href="#" class="text-sm text-emerald-600 hover:text-emerald-800">نسيت كلمة المرور؟</a>
              </div>
              
              <button type="submit" class="w-full bg-emerald-600 text-white py-3 px-4 rounded-md hover:bg-emerald-700 transition font-medium">
                تسجيل الدخول
              </button>
            </form>
          </div>
        </div>

        <!-- Register Form -->
        <div id="register-form" class="tab-content">
          <div class="bg-white p-8 rounded-lg shadow-md arabic-pattern">
            <form id="registerForm" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">الاسم الأول</label>
                  <input type="text" id="firstName" name="firstName" required 
                         class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
                </div>
                <div>
                  <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">اسم العائلة</label>
                  <input type="text" id="lastName" name="lastName" required 
                         class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
                </div>
              </div>
              
              <div>
                <label for="registerEmail" class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني</label>
                <input type="email" id="registerEmail" name="email" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div>
                <label for="userType" class="block text-sm font-medium text-gray-700 mb-2">نوع المستخدم</label>
                <select id="userType" name="userType" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
                  <option value="">اختر نوع المستخدم</option>
                  <option value="student">طالب</option>
                  <option value="teacher">معلم</option>
                  <option value="parent">ولي أمر</option>
                  <option value="admin">إداري</option>
                </select>
              </div>
              
              <div>
                <label for="registerPassword" class="block text-sm font-medium text-gray-700 mb-2">كلمة المرور</label>
                <input type="password" id="registerPassword" name="password" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div>
                <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2">تأكيد كلمة المرور</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div class="flex items-center">
                <input type="checkbox" id="agreeTerms" required class="ml-2 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                <label for="agreeTerms" class="text-sm text-gray-700">أوافق على <a href="#" class="text-emerald-600 hover:text-emerald-800">الشروط والأحكام</a></label>
              </div>
              
              <button type="submit" class="w-full bg-emerald-600 text-white py-3 px-4 rounded-md hover:bg-emerald-700 transition font-medium">
                إنشاء حساب
              </button>
            </form>
          </div>
        </div>

        <!-- Admin Approval Form -->
        <div id="admin-form" class="tab-content">
          <div class="bg-white p-8 rounded-lg shadow-md arabic-pattern">
            <div class="text-center mb-6">
              <h3 class="text-xl font-bold text-emerald-800 mb-2">طلب حساب إداري</h3>
              <p class="text-gray-600">يرجى ملء النموذج التالي لطلب حساب إداري. سيتم مراجعة طلبك والرد عليك عبر البريد الإلكتروني.</p>
            </div>
            <form id="adminForm" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label for="adminFirstName" class="block text-sm font-medium text-gray-700 mb-2">الاسم الأول</label>
                  <input type="text" id="adminFirstName" name="firstName" required 
                         class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
                </div>
                <div>
                  <label for="adminLastName" class="block text-sm font-medium text-gray-700 mb-2">اسم العائلة</label>
                  <input type="text" id="adminLastName" name="lastName" required 
                         class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
                </div>
              </div>
              
              <div>
                <label for="adminEmail" class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني</label>
                <input type="email" id="adminEmail" name="email" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div>
                <label for="adminPhone" class="block text-sm font-medium text-gray-700 mb-2">رقم الهاتف</label>
                <input type="tel" id="adminPhone" name="phone" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div>
                <label for="adminPosition" class="block text-sm font-medium text-gray-700 mb-2">المنصب/الوظيفة</label>
                <input type="text" id="adminPosition" name="position" required 
                       class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none">
              </div>
              
              <div>
                <label for="adminReason" class="block text-sm font-medium text-gray-700 mb-2">سبب الطلب</label>
                <textarea id="adminReason" name="reason" rows="4" required 
                          class="w-full px-4 py-3 border border-gray-300 rounded-md input-focus focus:outline-none"
                          placeholder="اشرح سبب حاجتك لحساب إداري..."></textarea>
              </div>
              
              <div class="flex items-center">
                <input type="checkbox" id="agreeAdminTerms" required class="ml-2 h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                <label for="agreeAdminTerms" class="text-sm text-gray-700">أوافق على <a href="#" class="text-emerald-600 hover:text-emerald-800">الشروط والأحكام</a> وأتعهد باستخدام الحساب الإداري بمسؤولية</label>
              </div>
              
              <button type="submit" class="w-full bg-emerald-600 text-white py-3 px-4 rounded-md hover:bg-emerald-700 transition font-medium">
                إرسال طلب الحساب الإداري
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script src="../login system/auth.js"></script>
  <script src="../login system/email-service.js"></script>
  <script>
    // Tab switching functionality
    function switchTab(tabName) {
      // Hide all tab contents
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      
      // Remove active class from all tab buttons
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-white', 'text-emerald-800');
        btn.classList.add('text-gray-600');
      });
      
      // Show selected tab content
      document.getElementById(tabName + '-form').classList.add('active');
      
      // Add active class to selected tab button
      document.getElementById(tabName + '-tab').classList.add('active', 'bg-white', 'text-emerald-800');
      document.getElementById(tabName + '-tab').classList.remove('text-gray-600');
    }

    // Handle admin form submission
    document.addEventListener('DOMContentLoaded', function() {
      const adminForm = document.getElementById('adminForm');
      if (adminForm) {
        adminForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const formData = new FormData(e.target);
          const adminRequest = {
            id: Date.now().toString(36) + Math.random().toString(36).substr(2),
            firstName: formData.get('firstName'),
            lastName: formData.get('lastName'),
            email: formData.get('email'),
            phone: formData.get('phone'),
            position: formData.get('position'),
            reason: formData.get('reason'),
            status: 'pending',
            requestDate: new Date().toISOString()
          };

          // Store admin request
          const adminRequests = JSON.parse(localStorage.getItem('adminRequests')) || [];
          adminRequests.push(adminRequest);
          localStorage.setItem('adminRequests', JSON.stringify(adminRequests));

          // Send email notification to website admin
          emailService.sendAdminRequestNotification(adminRequest);

          // Show success message
          alert('تم إرسال طلب الحساب الإداري بنجاح! سيتم مراجعة طلبك والرد عليك عبر البريد الإلكتروني.');
          
          // Reset form
          e.target.reset();
          
          // Switch to login tab
          switchTab('login');
        });
      }

      // Check if user is already logged in
      if (localStorage.getItem('userToken')) {
        window.location.href = '../index.html';
      }
    });
  </script>
</body>
</html> 